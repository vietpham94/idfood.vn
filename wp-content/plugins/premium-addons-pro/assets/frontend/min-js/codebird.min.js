"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],s=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);s=!0);}catch(e){i=!0,n=e}finally{try{!s&&a.return&&a.return()}finally{if(i)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var Codebird=function(){function Codebird(){_classCallCheck(this,Codebird),this._oauth_consumer_key=null,this._oauth_consumer_secret=null,this._oauth_bearer_token=null,this._endpoint_base="https://api.twitter.com/",this._endpoint_base_media="https://upload.twitter.com/",this._endpoint=this._endpoint_base+"1.1/",this._endpoint_media=this._endpoint_base_media+"1.1/",this._endpoint_publish="https://publish.twitter.com/",this._endpoint_oauth=this._endpoint_base,this._endpoint_proxy="https://twitter.premiumaddons.com/codebird-cors-proxy/",this._use_proxy="undefined"!=typeof navigator&&void 0!==navigator.userAgent,this._oauth_token=null,this._oauth_token_secret=null,this._version="3.0.0-dev",this.b64_alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return _createClass(Codebird,[{key:"setConsumerKey",value:function(e,t){this._oauth_consumer_key=e,this._oauth_consumer_secret=t}},{key:"setBearerToken",value:function(e){this._oauth_bearer_token=e}},{key:"getVersion",value:function(){return this._version}},{key:"setToken",value:function(e,t){this._oauth_token=e,this._oauth_token_secret=t}},{key:"logout",value:function(e){var t=this,r=this._getDfd();if(r||void 0!==e||(e=function(){}),this.__call("oauth_invalidateToken",{access_key:this._oauth_token,access_key_secret:this._oauth_token_secret}).then(function(){t._oauth_token=t._oauth_token_secret=null,"function"==typeof e&&e(!0),r&&r.resolve(!0)}),r)return this._getPromise(r)}},{key:"setUseProxy",value:function(e){this._use_proxy=!!e}},{key:"setProxy",value:function(e){e.match(/\/$/)||(e+="/"),this._endpoint_proxy=e}},{key:"_url",value:function(e){return/boolean|number|string/.test(void 0===e?"undefined":_typeof(e))?encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A"):""}},{key:"_sha1",value:function(e){function t(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r=new Array(80),s=1732584193,i=-271733879,n=-1732584194,o=271733878,a=-1009589776,u=0;u<e.length;u+=16){for(var c=s,l=i,h=n,_=o,d=a,f=0;f<80;f++){var p=void 0;p=f<16?e[u+f]:(p=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|p>>>31,r[f]=p,p=y(y(s<<5|s>>>27,f<20?i&n|~i&o:!(f<40)&&f<60?i&n|i&o|n&o:i^n^o),y(y(a,r[f]),f<20?1518500249:f<40?1859775393:f<60?-1894007588:-899497514)),a=o,o=n,n=i<<30|i>>>2,i=s,s=p}s=y(s,c),i=y(i,l),n=y(n,h),o=y(o,_),a=y(a,d)}return[s,i,n,o,a]}function y(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e){for(var t=[],r=(1<<i)-1,s=0;s<e.length*i;s+=i)t[s>>5]|=(e.charCodeAt(s/i)&r)<<24-s%32;return t}var i=8,s=this._oauth_consumer_secret+"&"+(null!==this._oauth_token_secret?this._oauth_token_secret:"");if(null===this._oauth_consumer_secret)throw"To generate a hash, the consumer secret must be set.";var n=r(s);16<n.length&&(n=t(n,s.length*i));for(var o=new Array(16),a=new Array(16),u=0;u<16;u++)a[u]=909522486^n[u],o[u]=1549556828^n[u];for(n=t(a.concat(r(e)),512+e.length*i),o=t(o.concat(n),672),s="",i=0;i<4*o.length;i+=3)for(u=(o[i>>2]>>8*(3-i%4)&255)<<16|(o[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|o[i+2>>2]>>8*(3-(i+2)%4)&255,e=0;e<4;e++)s=8*i+6*e>32*o.length?s+"=":s+this.b64_alphabet.charAt(u>>6*(3-e)&63);return s}},{key:"_base64_encode",value:function(e){var t=void 0,r=void 0,s=void 0,i=void 0,n=0,o=0,a=this.b64_alphabet,u=[];if(!e)return e;for(;t=(i=(t=e.charCodeAt(n++))<<16|(r=e.charCodeAt(n++))<<8|(s=e.charCodeAt(n++)))>>18&63,r=i>>12&63,s=i>>6&63,i&=63,u[o++]=a.charAt(t)+a.charAt(r)+a.charAt(s)+a.charAt(i),n<e.length;);return a=u.join(""),((e=e.length%3)?a.slice(0,e-3):a)+"===".slice(e||3)}},{key:"_http_build_query",value:function(e,t,r){function n(e,t,r){var s=void 0,i=[];if(!0===t?t="1":!1===t&&(t="0"),null===t)return"";if("object"===(void 0===t?"undefined":_typeof(t))){for(s in t)t.hasOwnProperty(s)&&null!==t[s]&&i.push(n.call(this,e+"["+s+"]",t[s],r));return i.join(r)}if("function"!=typeof t)return this._url(e)+"="+this._url(t);throw"There was an error processing for http_build_query()."}var s,i,o=[];for(i in r=r||"&",e)e.hasOwnProperty(i)&&(s=e[i],t&&!isNaN(i)&&(i=String(t)+i),""!==(s=n.call(this,i,s,r))&&o.push(s));return o.join(r)}},{key:"_nonce",value:function(e){var t=0<arguments.length&&void 0!==e?e:8;if(t<1)throw"Invalid nonce length.";for(var r="",s=0;s<t;s++){var i=Math.floor(61*Math.random());r+=this.b64_alphabet.substring(i,i+1)}return r}},{key:"_ksort",value:function(e){var t,r=[],s=void 0;for(s in t=function(e,t){var r=parseFloat(e),s=parseFloat(t),i=r+""===e,n=s+""===t;return i&&n?s<r?1:r<s?-1:0:i&&!n?1:!i&&n?-1:t<e?1:e<t?-1:0},e)e.hasOwnProperty(s)&&r.push(s);return r.sort(t),r}},{key:"_clone",value:function(e){var t={};for(var r in e)"object"===_typeof(e[r])?t[r]=this._clone(e[r]):t[r]=e[r];return t}},{key:"_getXmlRequestObject",value:function(){var t=null;if("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window&&void 0!==window.XMLHttpRequest)t=new window.XMLHttpRequest;else if("object"===("undefined"==typeof Ti?"undefined":_typeof(Ti))&&Ti&&void 0!==Ti.Network.createHTTPClient)t=Ti.Network.createHTTPClient();else if("undefined"!=typeof ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw"ActiveXObject object not defined."}else if("function"==typeof require){try{t=new(require("xmlhttprequest").XMLHttpRequest)}catch(e){try{t=new(require("xhr2"))}catch(e){throw"xhr2 object not defined, cancelling."}}}return t}},{key:"_parse_str",value:function _parse_str(str,array){var glue1="=",glue2="&",array2=String(str).replace(/^&?([\s\S]*?)&?$/,"$1").split(glue2),i,j,chr,tmp,key,value,bracket,keys,evalStr,fixStr=function(e){return decodeURIComponent(e).replace(/([\\"'])/g,"\\$1").replace(/\n/g,"\\n").replace(/\r/g,"\\r")};for(array=array||this.window,i=0;i<array2.length;i++){for(tmp=array2[i].split(glue1),tmp.length<2&&(tmp=[tmp,""]),key=fixStr(tmp[0]),value=fixStr(tmp[1]);" "===key.charAt(0);)key=key.substr(1);if(-1<key.indexOf("\0")&&(key=key.substr(0,key.indexOf("\0"))),key&&"["!==key.charAt(0)){for(keys=[],bracket=0,j=0;j<key.length;j++)if("["!==key.charAt(j)||bracket){if("]"===key.charAt(j)&&bracket&&(keys.length||keys.push(key.substr(0,bracket-1)),keys.push(key.substr(bracket,j-bracket)),bracket=0,"["!==key.charAt(j+1)))break}else bracket=j+1;for(keys.length||(keys=[key]),j=0;j<keys[0].length&&(chr=keys[0].charAt(j)," "!==chr&&"."!==chr&&"["!==chr||(keys[0]=keys[0].substr(0,j)+"_"+keys[0].substr(j+1)),"["!==chr);j++);for(evalStr="array",j=0;j<keys.length;j++)key=keys[j],key=""!==key&&" "!==key||0===j?"'"+key+"'":eval(evalStr+".push([]);")-1,evalStr+="["+key+"]",j!==keys.length-1&&"undefined"===eval("typeof "+evalStr)&&eval(evalStr+" = [];");evalStr+=" = '"+value+"';\n",eval(evalStr)}}}},{key:"getApiMethods",value:function(){return{GET:["account/settings","account/verify_credentials","account_activity/all/:env_name/subscriptions","account_activity/all/:env_name/subscriptions/list","account_activity/all/:env_name/webhooks","account_activity/all/webhooks","account_activity/subscriptions/count","account_activity/webhooks","account_activity/webhooks/:webhook_id/subscriptions/all","account_activity/webhooks/:webhook_id/subscriptions/all/list","application/rate_limit_status","blocks/ids","blocks/list","collections/entries","collections/list","collections/show","custom_profiles/:id","custom_profiles/list","direct_messages/events/list","direct_messages/events/show","direct_messages/welcome_messages/list","direct_messages/welcome_messages/rules/list","direct_messages/welcome_messages/rules/show","direct_messages/welcome_messages/show","favorites/list","feedback/events","feedback/show/:id","followers/ids","followers/list","friends/ids","friends/list","friendships/incoming","friendships/lookup","friendships/lookup","friendships/no_retweets/ids","friendships/outgoing","friendships/show","geo/id/:place_id","geo/reverse_geocode","geo/search","help/configuration","help/languages","help/privacy","help/tos","lists/list","lists/members","lists/members/show","lists/memberships","lists/ownerships","lists/show","lists/statuses","lists/subscribers","lists/subscribers/show","lists/subscriptions","mutes/users/ids","mutes/users/list","oauth/authenticate","oauth/authorize","saved_searches/list","saved_searches/show/:id","search/tweets","statuses/home_timeline","statuses/mentions_timeline","statuses/oembed","statuses/retweeters/ids","statuses/retweets/:id","statuses/retweets_of_me","statuses/sample","statuses/show/:id","statuses/user_timeline","trends/available","trends/closest","trends/place","users/profile_banner","users/search","users/show","users/suggestions","users/suggestions/:slug","users/suggestions/:slug/members"],POST:["account/remove_profile_banner","account/settings__post","account/update_profile","account/update_profile_banner","account/update_profile_image","account_activity/all/:env_name/subscriptions","account_activity/all/:env_name/webhooks","account_activity/webhooks","account_activity/webhooks/:webhook_id/subscriptions/all","blocks/create","blocks/destroy","collections/create","collections/destroy","collections/entries/add","collections/entries/curate","collections/entries/move","collections/entries/remove","collections/update","custom_profiles/new","direct_messages/events/new","direct_messages/indicate_typing","direct_messages/mark_read","direct_messages/welcome_messages/new","direct_messages/welcome_messages/rules/new","favorites/create","favorites/destroy","feedback/create","friendships/create","friendships/destroy","friendships/update","lists/create","lists/destroy","lists/members/create","lists/members/create_all","lists/members/destroy","lists/members/destroy_all","lists/subscribers/create","lists/subscribers/destroy","lists/update","media/metadata/create","media/upload","mutes/users/create","mutes/users/destroy","oauth/access_token","oauth/invalidate_token","oauth/request_token","oauth2/invalidate_token","oauth2/token","saved_searches/create","saved_searches/destroy/:id","statuses/destroy/:id","statuses/filter","statuses/lookup","statuses/retweet/:id","statuses/unretweet/:id","statuses/update","users/lookup","users/report_spam"]}}},{key:"_getDfd",value:function(){if("undefined"!=typeof window){if(void 0!==window.jQuery&&window.jQuery.Deferred)return window.jQuery.Deferred();if(void 0!==window.Q&&window.Q.defer)return window.Q.defer();if(void 0!==window.RSVP&&window.RSVP.defer)return window.RSVP.defer();if(void 0!==window.when&&window.when.defer)return window.when.defer()}if("undefined"!=typeof require){var e=!1;try{e=require("jquery")}catch(e){}if(e)return e.Deferred();try{e=require("q")}catch(e){}if(!e)try{e=require("rsvp")}catch(e){}if(!e)try{e=require("when")}catch(e){}if(e)try{return e.defer()}catch(e){}}return!1}},{key:"_getPromise",value:function(e){return"function"==typeof e.promise?e.promise():e.promise}},{key:"_parseApiParams",value:function(e){var t={};return"object"===(void 0===e?"undefined":_typeof(e))?t=e:this._parse_str(e,t),t}},{key:"_stringifyNullBoolParams",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];null===r?e[t]="null":!0!==r&&!1!==r||(e[t]=r?"true":"false")}return e}},{key:"_mapFnInsertSlashes",value:function(e){return e.split("_").join("/")}},{key:"_mapFnRestoreParamUnderscores",value:function(e){var t=["screen_name","place_id"],r=void 0,s=void 0,i=void 0;for(r=0;r<t.length;r++)i=(s=t[r].toUpperCase()).split("_").join("/"),e=e.split(i).join(s);return e}},{key:"_mapFnToApiMethod",value:function(e,t){var r="",s=void 0,i=void 0,n=void 0;r=this._mapFnInsertSlashes(e);var o=r=this._mapFnRestoreParamUnderscores(r),a=r.match(/[A-Z_]{2,}/);if(a)for(i=0;i<a.length;i++){var u=(s=a[i]).toLowerCase();if(o=o.split(s).join(":"+u),void 0===t[u]){for(n=0;n<26;n++)o=o.split(String.fromCharCode(65+n)).join("_"+String.fromCharCode(97+n));throw'To call the templated method "'+o+'", specify the parameter value for "'+u+'".'}r=r.split(s).join(t[u]),delete t[u]}for(i=0;i<26;i++)r=r.split(String.fromCharCode(65+i)).join("_"+String.fromCharCode(97+i)),o=o.split(String.fromCharCode(65+i)).join("_"+String.fromCharCode(97+i));return[r,o]}},{key:"_detectMethod",value:function(e,t){if(void 0!==t.httpmethod){var r=t.httpmethod;return delete t.httpmethod,r}switch(e){case"account/settings":case"account/login_verification_enrollment":case"account/login_verification_request":e=Object.keys(t).length?e+"__post":e}var s=this.getApiMethods();for(var i in s)if(s.hasOwnProperty(i)&&-1<s[i].indexOf(e))return i;throw"Can't find HTTP method to use for \""+e+'".'}},{key:"_detectMultipart",value:function(e){return-1<["media/upload","account/update_profile_image","account/update_profile_banner"].indexOf(e)}},{key:"_getSignature",value:function(e,t,r,s){for(var i="",n=void 0,o=void 0,a=0;a<r.length;a++)o=s[n=r[a]],i+=n+"="+this._url(o)+"&";return i=i.substring(0,i.length-1),this._sha1(e+"&"+this._url(t)+"&"+this._url(i))}},{key:"_time",value:function(){return Math.round((new Date).getTime()/1e3)}},{key:"_sign",value:function(e,t,r){var s=2<arguments.length&&void 0!==r?r:{};if(null===this._oauth_consumer_key)throw"To generate a signature, the consumer key must be set.";var i={consumer_key:this._oauth_consumer_key,version:"1.0",timestamp:this._time(),nonce:this._nonce(),signature_method:"HMAC-SHA1"},n={};for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];n["oauth_"+o]=this._url(a)}null!==this._oauth_token&&(n.oauth_token=this._url(this._oauth_token));var u=this._clone(n);for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o]);var c=this._ksort(n),l=this._getSignature(e,t,c,n);(s=u).oauth_signature=l,c=this._ksort(s);for(var h="OAuth ",_=0;_<c.length;_++)h+=(o=c[_])+'="'+this._url(s[o])+'", ';return h.substring(0,h.length-2)}},{key:"_buildMultipart",value:function(e,t){if(this._detectMultipart(e)){var r={"media/upload":"media","account/update_profile_image":"image","account/update_profile_banner":"banner"};if(-1!==["media/upload","account/update_profile_image","account/update_profile_banner"].indexOf(e)){r=r[e].split(" ");var s="--------------------"+this._nonce(),i="";for(var n in t)t.hasOwnProperty(n)&&(i+="--"+s+'\r\nContent-Disposition: form-data; name="'+n+'"',-1===r.indexOf(n)&&(i+="\r\nContent-Transfer-Encoding: base64"),i+="\r\n\r\n"+t[n]+"\r\n");return i+="--"+s+"--"}}}},{key:"_detectMedia",value:function(e){return-1<["media/metadata/create","media/upload"].indexOf(e)}},{key:"_detectJsonBody",value:function(e){return-1<["collections/entries/curate","custom_profiles/new","direct_messages/events/new","direct_messages/indicate_typing","direct_messages/mark_read","direct_messages/welcome_messages/new","direct_messages/welcome_messages/rules/new","direct_messages/welcome_messages/update","media/metadata/create"].indexOf(e)}},{key:"_getEndpoint",value:function(e){return"oauth/invalidate_token"===e.substring(0,22)?this._endpoint+e+".json":"oauth"===e.substring(0,5)?this._endpoint_oauth+e:this._detectMedia(e)?this._endpoint_media+e+".json":"statuses/oembed"===e?this._endpoint_publish+"oembed":this._endpoint+e+".json"}},{key:"_parseApiReply",value:function(t){if("string"!=typeof t||""===t)return{};if("[]"===t)return[];var r=void 0;try{r=JSON.parse(t)}catch(e){if(r={},t.match(/^<\?xml/)){var s=void 0;if(s=t.match(/<errors>(.+)<\/errors>/)){r.errors={},s=s[1].match(/<error [^<]+/g);for(var i=0;i<s.length;i++){var n=s[i].match(/code="(\d+)">(.+)/);r.errors[n[1]]=n[2]}}return r}for(var o=t.split("&"),a=0;a<o.length;a++){var u=o[a].split("=",2);1<u.length?r[u[0]]=decodeURIComponent(u[1]):r[u[0]]=null}}return r}},{key:"oauth_authenticate",value:function(e,t,r){var s=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==t?t:void 0,n=2<arguments.length&&void 0!==r?r:"authenticate",o=this._getDfd();if(void 0===s.force_login&&(s.force_login=null),void 0===s.screen_name&&(s.screen_name=null),-1===["authenticate","authorize"].indexOf(n)&&(n="authenticate"),null===this._oauth_token){var a="To get the "+n+" URL, the OAuth token must be set.";if(o)return o.reject({error:a}),this._getPromise(o);throw a}var u=this._endpoint_oauth+"oauth/"+n+"?oauth_token="+this._url(this._oauth_token);return!0===s.force_login&&(u+="&force_login=1"),null!==s.screen_name&&(u+="&screen_name="+s.screen_name),"function"==typeof i&&i(u),!o||(o.resolve({reply:u}),this._getPromise(o))}},{key:"oauth_authorize",value:function(e,t){return this.oauth_authenticate(e,t,"authorize")}},{key:"oauth2_token",value:function(s){var i=this,n=this._getDfd();if(null===this._oauth_consumer_key){var e="To obtain a bearer token, the consumer key must be set.";if(n)return n.reject({error:e}),this._getPromise(n);throw e}n||void 0!==s||(s=function(){});var t=this._endpoint_oauth+"oauth2/token";this._use_proxy&&(t=t.replace(this._endpoint_base,this._endpoint_proxy));var o=this._getXmlRequestObject();if(null!==o)return o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader((this._use_proxy?"X-":"")+"Authorization","Basic "+this._base64_encode(this._oauth_consumer_key+":"+this._oauth_consumer_secret)),o.onreadystatechange=function(){if(4<=o.readyState){var e=12027;try{e=o.status}catch(e){}var t="";try{t=o.responseText}catch(e){}var r=i._parseApiReply(t);200===(r.httpstatus=e)&&i.setBearerToken(r.access_token),"function"==typeof s&&s(r),n&&n.resolve({reply:r})}},o.onerror=function(e){"function"==typeof s&&s(null,e),n&&n.reject(e)},o.timeout=3e4,o.send("grant_type=client_credentials"),n?this._getPromise(n):void 0}},{key:"_callApi",value:function(e,t,r,s,i,n){var o=2<arguments.length&&void 0!==r?r:{},a=3<arguments.length&&void 0!==s&&s,u=this,c=4<arguments.length&&void 0!==i&&i,l=5<arguments.length&&void 0!==n?n:function(){},h=this._getDfd(),_=this._getEndpoint(t),d=null,f=this._getXmlRequestObject();if(null!==f){var p=void 0;if("GET"===e){var y=_;"{}"!==JSON.stringify(o)&&(y+="?"+this._http_build_query(o)),c||(d=this._sign(e,_,o)),this._use_proxy&&(y=y.replace(this._endpoint_base,this._endpoint_proxy).replace(this._endpoint_base_media,this._endpoint_proxy)),f.open(e,y,!0)}else p=o=a?(c||(d=this._sign(e,_,{})),this._buildMultipart(t,o)):this._detectJsonBody(t)?(d=this._sign(e,_,{}),JSON.stringify(o)):(c||(d=this._sign(e,_,o)),this._http_build_query(o)),(this._use_proxy||a)&&(_=_.replace(this._endpoint_base,this._endpoint_proxy).replace(this._endpoint_base_media,this._endpoint_proxy)),f.open(e,_,!0),a?f.setRequestHeader("Content-Type","multipart/form-data; boundary="+p.split("\r\n")[0].substring(2)):this._detectJsonBody(t)?f.setRequestHeader("Content-Type","application/json"):f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(c){if(null===this._oauth_consumer_key&&null===this._oauth_bearer_token){var m="To make an app-only auth API request, consumer key or bearer token must be set.";if(h)return h.reject({error:m}),this._getPromise(h);throw m}if(null===this._oauth_bearer_token)return h?this.oauth2_token().then(function(){return u._callApi(e,t,o,a,c,l)}):void this.oauth2_token(function(){u._callApi(e,t,o,a,c,l)});d="Bearer "+this._oauth_bearer_token}return null!==d&&f.setRequestHeader((this._use_proxy?"X-":"")+"Authorization",d),f.onreadystatechange=function(){if(4<=f.readyState){var e=12027;try{e=f.status}catch(e){}var t="";try{t=f.responseText}catch(e){}var r=u._parseApiReply(t);r.httpstatus=e;var s=null;void 0!==f.getResponseHeader&&""!==f.getResponseHeader("x-rate-limit-limit")&&(s={limit:f.getResponseHeader("x-rate-limit-limit"),remaining:f.getResponseHeader("x-rate-limit-remaining"),reset:f.getResponseHeader("x-rate-limit-reset")}),"function"==typeof l&&l(r,s),h&&h.resolve({reply:r,rate:s})}},f.onerror=function(e){"function"==typeof l&&l(null,null,e),h&&h.reject(e)},f.timeout=3e4,f.send("GET"===e?null:p),!h||this._getPromise(h)}}},{key:"__call",value:function(e,t,r,s){var i=1<arguments.length&&void 0!==t?t:{},n=r,o=3<arguments.length&&void 0!==s&&s;switch("function"!=typeof n&&"function"==typeof i?(n=i,i={},"boolean"==typeof n&&(o=n)):void 0===n&&(n=function(){}),e){case"oauth_authenticate":case"oauth_authorize":return this[e](i,n);case"oauth2_token":return this[e](n)}var a=this._parseApiParams(i);a=this._stringifyNullBoolParams(a),"oauth_requestToken"===e&&this.setToken(null,null);var u=this._mapFnToApiMethod(e,a),c=_slicedToArray(u,2),l=c[0],h=c[1],_=this._detectMethod(h,a),d=this._detectMultipart(h);return this._callApi(_,l,a,d,o,n)}}]),Codebird}();"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module&&"object"===_typeof(module.exports)?module.exports=Codebird:("object"===("undefined"==typeof window?"undefined":_typeof(window))&&window&&(window.Codebird=Codebird),"function"==typeof define&&define.amd&&define("codebird",[],function(){return Codebird}))}();